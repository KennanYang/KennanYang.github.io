<% 
// 提取文件名前缀的数字作为序号
var serial = '';
if (post.source) {
  var match = post.source.match(/^(\d+)[-_]/);
  if (match) serial = match[1];
}
%>
<% if (post.link){ %>
<h2 itemprop="name">
  <a class="<%= class_name %>" href="<%- url_for(post.link) %>" itemprop="url">
    <% if (index && serial) { %><span style="color:#bbb;font-size:1rem;margin-right:0.5em;">[<%= serial %>]</span><% } %><%= post.title %>
  </a>
</h2>
<% } else if (post.title){ %> <% if (index){ %>
<h2 itemprop="name">
  <a class="<%= class_name %>" href="<%- url_for(post.path) %>">
    <% if (serial) { %><span style="color:#bbb;font-size:1rem;margin-right:0.5em;">[<%= serial %>]</span><% } %><%= post.title %><%- partial('topping') %>
  </a>
</h2>
<% } else { %>
<h1 class="<%= class_name %> sea-center" style="border-left:0" itemprop="name">
  <%= post.title %>
</h1>
<% } %> <% } %>
